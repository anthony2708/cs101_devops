---
title: Ng√†y 13 - Th·ª±c hi·ªán ch∆∞∆°ng tr√¨nh
sidebar:
  order: 7
  badge:
    text: M·ªõi
    variant: tip
---

import { LinkCard, Code, FileTree, Steps } from '@astrojs/starlight/components';
import importedCode from '/src/assets/code/src/web/main.go?raw';
import htmlCode from '/src/assets/code/src/web/index.html?raw';
import txtfile from '/src/assets/code/src/web/note.txt?raw';

_Xin ch√†o m·ªçi ng∆∞·ªùi, nh∆∞ v·∫≠y l√† sau nh·ªØng ng√†y b·∫≠n r·ªôn v·ªõi nhi·ªÅu vi·ªác thi nh·∫≠t tr√¨nh ng√†y 13
c≈©ng ƒë√£ s·∫µn s√†ng ƒë·ªÉ cho l√™n s√≥ng r·ªìi ƒë√¢y. H√£y s·∫µn s√†ng ƒë·ªÉ ch·ª©ng ki·∫øn ·ª©ng d·ª•ng c·ªßa ch√∫ng ta
**l√™n s√≥ng ch√≠nh th·ª©c th√¥i n√†o!**_ ‚úà

## Ch·ªânh s·ª≠a m√£ ngu·ªìn

_H√£y nh√¨n ƒëo·∫°n m√£ ngu·ªìn h·∫≠u ch·ªânh s·ª≠a ngay sau ƒë√¢y. V·ªõi m√£ ngu·ªìn n√†y, ch√∫ng ta s·∫Ω x√¢y d·ª±ng 
m·ªôt trang web ch·ª©a c√°c th√¥ng tin li√™n quan ƒë·∫øn h√†nh tr√¨nh c·ªßa ch√∫ng ta._

<Code code={importedCode} lang="go" title="src/main.go" />

## C√¢y th∆∞ m·ª•c

_V·ªõi m√£ ngu·ªìn n√†y, c√¢y th∆∞ m·ª•c ```web``` c·ªßa ch√∫ng ta s·∫Ω c√≥ t·∫•t c·∫£ ba t·∫≠p tin nh∆∞ sau._

<FileTree>
- src/
  - hello/
    - main.go
  - **web/**
    - index.html
    - note.txt
    - main.go
</FileTree>

### T·∫≠p tin index.html üíª
_M·ªôt t·∫≠p tin c√≥ ph·∫ßn m·ªü r·ªông k·∫øt th√∫c b·∫±ng .html l√† m·ªôt **trang web**. ƒêi·ªÉm ƒë·∫∑c bi·ªát c·ªßa t·∫≠p tin 
n√†y ch√≠nh l√†, n·∫øu ta m·ªü n√≥ ·ªü tr√¨nh duy·ªát, ta s·∫Ω th·∫•y tr·ªçn v·∫πn trang web ƒë√≥ (gi·ªëng nh∆∞ web 90 ng√†y
DevOps ch·∫≥ng h·∫°n). Tuy nhi√™n, n·∫øu ta m·ªü ·ªü tr√¨nh ch·ªânh s·ª≠a t·∫≠p tin, n√≥ s·∫Ω c√≥ c·∫•u tr√∫c nh∆∞ th·∫ø n√†y._

```html title="index.html"
<html>
  <head>
    <title>Xin ch√†o Vi·ªát Nam</title>
  </head>
  <body>
    <p>Xin ch√†o Vi·ªát Nam!</p>
  </body>
</html>
```

_·ªû ƒë√¢y, t·∫≠p tin ```index.html``` s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh ƒë·ªÉ ti·∫øp nh·∫≠n nh·ªØng th√¥ng tin t·ª´ ch∆∞∆°ng tr√¨nh Go c·ªßa
ch√∫ng ta. C·ª• th·ªÉ n√≥ nh∆∞ th·∫ø n√†y._

<Code code={htmlCode} lang="html" title="src/index.html" />

- _```html lang="vi"``` ch·ªâ ƒë·ªãnh ng√¥n ng·ªØ **ti·∫øng Vi·ªát** cho trang Web_
- _C√°c n·ªôi dung c√≤n l·∫°i v·∫´n t∆∞∆°ng t·ª± nh∆∞ c≈©, tuy nhi√™n v·∫´n c√≥ nh·ªØng ch·ªó l·∫° l·∫´m m√† ta c√≥ th·ªÉ kh√¥ng r√µ nh∆∞ 
```{{ .FacebookName }}``` hay ```{{ .DaysCompleted }}```, ta s·∫Ω l∆∞u √Ω n√≥ sau._

### T·∫≠p tin note.txt üìù

_ƒê√¢y l√† n·ªôi dung c·ªßa t·∫≠p tin._

<Code code={txtfile} lang="txt" title="src/note.txt" />

_C√≥ 3 tr∆∞·ªùng th√¥ng tin, g·ªìm **t√™n [facebook](https://facebook.com/buile.tuananh)**, **s·ªë ng√†y 
ho√†n th√†nh (13)** v√† s**·ªë ng√†y c√≤n l·∫°i (77)**, ngƒÉn c√°ch v·ªõi nhau b·∫±ng d·∫•u ph·∫©y. T·∫≠p tin n√†y 
c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh t√πy √Ω._

### T·∫≠p tin main.go

#### ƒêo·∫°n m√£ ngu·ªìn ƒë·∫ßu ti√™n
_H√£y ch√∫ √Ω ƒëo·∫°n m√£ ngu·ªìn n√†y._

```go
import (
	"fmt"
	"html/template"
	"log"
	"net/http"
	"os"
	"strconv"
	"strings"
)
```
_Ngo√†i th∆∞ vi·ªán ```fmt``` chu·∫©n ra, ta c√≥ th·∫•y c√≥ m·ªôt lo·∫°t c√°c th∆∞ vi·ªán kh√°c xu·∫•t hi·ªán.
C·ª• th·ªÉ nh∆∞ sau._

- _```html/template``` v√† ```net/http```: M·ªôt th∆∞ vi·ªán chuy√™n d·ª•ng ƒë·ªÉ s·ª≠ d·ª•ng c√°c **t·∫≠p
tin HTML**, c√≤n th∆∞ vi·ªán c√≤n l·∫°i l√† th∆∞ vi·ªán ch·ªß l·ª±c trong th·ª±c hi·ªán **t·∫°o m·ªôt m√°y ch·ªß cho
trang web**._
- _```log``` v√† ```os```: C·∫∑p th∆∞ vi·ªán n√†y c√≥ hai vai tr√≤: M·ªôt l√† ph·ª•c v·ª• **t∆∞∆°ng t√°c v·ªõi
t·∫≠p tin/h·ªá ƒëi·ªÅu h√†nh (OS)**, hai l√† x·ª≠ l√Ω g**hi nh·∫≠t tr√¨nh v√† b√°o l·ªói** n·∫øu c√≥ s·ª± c·ªë x·∫£y ra
trong qu√° tr√¨nh v·∫≠n h√†nh ·ª©ng d·ª•ng._
- _```strconv``` v√† ```strings```: C·∫∑p th∆∞ vi·ªán li√™n quan ƒë·∫øn x·ª≠ l√Ω **ki·ªÉu d·ªØ li·ªáu d·∫°ng
chu·ªói**, trong ƒë√≥ ```strconv``` l√† chuy·ªÉn ƒë·ªïi m·ªôt bi·∫øn b·∫•t k·ª≥ sang chu·ªói ho·∫∑c ng∆∞·ª£c l·∫°i._

#### Kh·ªëi c·∫•u tr√∫c ƒë·ªãnh h√¨nh

_Ta t·∫°o m·ªôt kh·ªëi c·∫•u tr√∫c nh∆∞ sau._

```go
type Page struct {
	Title         string
	facebookName  string
	daysCompleted uint
	remainingDays uint
}
```
_Kh·ªëi n√†y ƒë·ªãnh h√¨nh trang web c·ªßa ch√∫ng ta ch·ª©a nh·ªØng th√¥ng tin g√¨. Ki·ªÉu d·ªØ li·ªáu v√† t√™n g·ªçi
c√≥ th·ªÉ m·ªçi ng∆∞·ªùi ƒë√£ quen thu·ªôc, n·∫øu ch∆∞a, h√£y quay l·∫°i nh·ªØng ng√†y tr∆∞·ªõc ƒë·ªÉ xem l·∫°i nh√©._

#### H√†m x·ª≠ l√Ω n·ªôi dung trang web

```go
func loadPage(title string) (*Page, error) {
	filename := title + ".txt"
	data, err := os.ReadFile(filename)
	if err != nil {
		return nil, err
	}

	parts := strings.Split(string(data), ",")
	if len(parts) != 3 {
		return nil, fmt.Errorf("Th√¥ng tin kh√¥ng h·ª£p l·ªá trong: %s", filename)
	}

	facebookName := parts[0]
	if len(facebookName) == 0 {
		return nil, fmt.Errorf("Facebook kh√¥ng h·ª£p l·ªá: %s", parts[0])
	}

	daysCompleted, err := strconv.Atoi(parts[1])
	if err != nil {
		return nil, fmt.Errorf("S·ªë ng√†y kh√¥ng h·ª£p l·ªá: %s", parts[1])
	}

	remainingDays, err := strconv.Atoi(parts[2])
	if err != nil {
		return nil, fmt.Errorf("S·ªë ng√†y c√≤n l·∫°i kh√¥ng h·ª£p l·ªá: %s", parts[2])
	}

	stringDaysCompleted := uint(daysCompleted)
	stringRemainingDays := uint(remainingDays)

	return &Page{
		Title:         title,
		facebookName:  facebookName,
		daysCompleted: stringDaysCompleted,
		remainingDays: stringRemainingDays,
	}, nil
}
```

_H√†m n√†y nh·∫≠n ƒë·∫ßu v√†o ch√≠nh l√† t√™n t·∫≠p tin vƒÉn b·∫£n (txt) c·ªßa ch√∫ng ta, ƒë·ªìng th·ªùi tr·∫£ v·ªÅ m·ªôt
con tr·ªè t∆∞∆°ng ·ª©ng v·ªõi trang ƒë√≥. H√†m ch·∫°y nh∆∞ sau._

<Steps>
1. _M·ªü t·∫≠p tin vƒÉn b·∫£n. N·∫øu kh√¥ng m·ªü ƒë∆∞·ª£c t·∫≠p tin n√†o c√≥ ƒë·ªãnh d·∫°ng t∆∞∆°ng ·ª©ng, **b√°o l·ªói**._
2. _Chia t√°ch d√£y th√¥ng tin trong t·∫≠p tin th√†nh ba th√¥ng tin kh√°c nhau. Ki·ªÉm tra ƒë·ªãnh d·∫°ng
v√† s·ª± t·ªìn t·∫°i c·ªßa c·∫£ ba th√¥ng tin, n·∫øu c√≥ sai s√≥t, **b√°o l·ªói**._
3. _Chuy·ªÉn ƒë·ªïi ng∆∞·ª£c tr·ªü l·∫°i hai th√¥ng tin s·ªë ng√†y v·ªÅ ki·ªÉu d·ªØ li·ªáu s·ªë (**sau khi chuy·ªÉn sang ki·ªÉu
chu·ªói ƒë·ªÉ ki·ªÉm tra ƒë·∫ßu v√†o**)._
4. _Truy·ªÅn **tham chi·∫øu (con tr·ªè)** ch·ª©a to√†n b·ªô th√¥ng tin t∆∞∆°ng ·ª©ng ƒë·ªÉ ch·ªù t·∫°o m·ªôt trang web._
</Steps>

#### H√†m x·ª≠ l√Ω giao di·ªán web
```go
func viewController(w http.ResponseWriter, r *http.Request) {
	title := r.URL.Path[len("/view/"):]
	p, err := loadPage(title)
	t, err := template.ParseFiles("index.html")
	if err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
		return
	}
	totalDays := 90
	challenge := "#90Ng√†yDevOps"

	data := map[string]interface{}{
		"Title":         p.Title,
		"FacebookName":  p.facebookName,
		"Challenge":     challenge,
		"TotalDays":     totalDays,
		"DaysCompleted": p.daysCompleted,
		"RemainingDays": p.remainingDays,
	}
	if err := t.Execute(w, data); err != nil {
		http.Error(w, err.Error(), http.StatusInternalServerError)
		return
	}
}
```

_Controller, c≈©ng nh∆∞ m·ªôt c√°i c·∫ßn g·∫°t, gi√∫p x·ª≠ l√Ω to√†n b·ªô ·ª©ng d·ª•ng web c·ªßa ch√∫ng ta.
H√†m n√†y v·∫≠n h√†nh nh∆∞ sau._

<Steps>
1. _ƒê·ªçc ƒë∆∞·ªùng d·∫´n v√† ki·ªÉm tra s·ª± hi·ªán di·ªán c·ªßa t·∫≠p tin vƒÉn b·∫£n c√≥ t√™n t∆∞∆°ng ·ª©ng. C·ª• th·ªÉ
l√† ```view/abc/``` ·ª©ng v·ªõi t·∫≠p tin ```abc.txt```. N·∫øu kh√¥ng c√≥, **b√°o l·ªói**._
2. _T·∫£i t·∫≠p tin m·∫´u ```index.html``` l√™n h·ªá th·ªëng, n·∫øu c√≥ m·∫´u. N·∫øu kh√¥ng c√≥, **b√°o l·ªói**._
3. _**G√°n d·ªØ li·ªáu (map)** th√¥ng tin c·ªßa c√°c tr∆∞·ªùng th√¥ng tin t∆∞∆°ng ·ª©ng v·ªõi c√°c bi·∫øn v√†o t·∫≠p
tin m·∫´u ```index.html``` ƒë·ªÉ x·ª≠ l√Ω. ƒê√¢y ch√≠nh l√† n∆°i m√† c√°c k√Ω hi·ªáu l·∫° trong t·∫≠p tin m·∫´u c·ªßa
ch√∫ng ta ·ªü ph·∫ßn ƒë·∫ßu nh∆∞ ```{{ .FacebookName }}``` hay ```{{ .DaysCompleted }}``` ƒë∆∞·ª£c l∆∞u 
d·ªØ li·ªáu._
</Steps>

#### H√†m ch√≠nh v√† k·∫øt qu·∫£ cu·ªëi c√πng
```go
func main() {
	http.HandleFunc("/view/", viewController)
	log.Fatal(http.ListenAndServe("localhost:8080", nil))
}
```

_H√†m n√†y l√†m nhi·ªám v·ª• kh·ªüi ƒë·ªông v√† ƒë∆∞a c·∫ßn g·∫°t v·ªÅ ƒë√∫ng b·ªô ph·∫≠n qu·∫£n l√Ω. ƒê·ªìng th·ªùi, h√†m n√†y
c≈©ng s·∫Ω m·ªü k·∫øt n·ªëi tr√™n c·ªïng **8080** ƒë·ªÉ ƒë∆∞a trang web v·∫≠n h√†nh c≈©ng nh∆∞ b√°o l·ªói n·∫øu ph√°t 
hi·ªán sai s√≥t._ 

_Ch·∫°y ch∆∞∆°ng tr√¨nh b·∫±ng l·ªánh quen thu·ªôc t·∫°i th∆∞ m·ª•c ch·ª©a c√°c t·∫≠p tin n√†y._

```bash title="Starting the webapp..."

go run main.go

```

**_ƒê√¢y l√† k·∫øt qu·∫£ cu·ªëi c√πng c·ªßa ch√∫ng ta._**

![Webapp](../../../../assets/golang/90DevOps_webapp.png)

_Nh·∫•n ***```Ctrl+C```*** ƒë·ªÉ k·∫øt th√∫c ch∆∞∆°ng tr√¨nh._

_Nh∆∞ v·∫≠y, **h√†nh tr√¨nh Golang c·ªßa ch√∫ng ta ƒë√£ ho√†n th√†nh**. V·ªõi ƒëo·∫°n m√£ ngu·ªìn n√†y, ch√∫ng ta 
c√≤n c√≥ th·ªÉ l√†m ƒë∆∞·ª£c nhi·ªÅu ƒëi·ªÅu h∆°n, v√≠ d·ª• ch·ªânh s·ª≠a t·ªïng s·ªë ng√†y c≈©ng nh∆∞ t√™n c·ªßa m·ªôt h√†nh 
tr√¨nh n√†o ƒë√≥ ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ t·ª± nh·∫≠p v√†o h·ªá th·ªëng._

**_Hy v·ªçng, t·∫•t c·∫£ m·ªçi ng∆∞·ªùi ƒë√£ c√≥ ƒë∆∞·ª£c nh·ªØng tr·∫£i nghi·ªám tuy·ªát v·ªùi c√πng ƒëi·ªÉm d·ª´ng ch√¢n n√†y._**

## T√†i li·ªáu tham kh·∫£o üìö

_M·ªùi m·ªçi ng∆∞·ªùi chuy·ªÉn sang trang n√†y ƒë·ªÉ theo d√µi t·∫•t c·∫£ t√†i li·ªáu li√™n quan trong giai ƒëo·∫°n 2, 
ƒë·ªÉ gi√∫p b·∫£n th√¢n c√≥ ƒë∆∞·ª£c nh·ªØng t√†i li·ªáu h·ªØu √≠ch v·ªÅ Golang trong l√†m vi·ªác v·ªõi DevOps._

<LinkCard
  title="Ng√†y 13 - Tham kh·∫£o"
  href="../../../reference/golang/day7"
/>

_H·∫πn g·∫∑p m·ªçi ng∆∞·ªùi ·ªü nh·ªØng ng√†y ti·∫øp theo, n∆°i m√† ch√∫ng ta s·∫Ω b·∫Øt ƒë·∫ßu l√†m vi·ªác v·ªõi Linux - m·ªôt
h·ªá ƒëi·ªÅu h√†nh c·ª±c k·ª≥ g·∫ßn g≈©i v·ªõi c√°c l·∫≠p tr√¨nh vi√™n c≈©ng nh∆∞ k·ªπ s∆∞ DevOps._ üöÄ